{"componentChunkName":"component---src-templates-post-js","path":"/post/2021_05_09_qieditor/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby OMG Blog","post":{"pageviews":true}}},"markdownRemark":{"id":"f3ed029a-3590-5702-a2d7-7b94d5edab4a","excerpt":"â€¦","html":"<p>ä¸çŸ¥å¤§å®¶æ˜¯å¦æœ‰ç€è¿™æ ·çš„éœ€æ±‚ï¼Œä¸€ä¸ªé€šç”¨æ¨¡æ¿çš„å…¬å‘Šç±»ã€è§„åˆ™ç±»çš„é™æ€é¡µé¢æœ‰ç€é•¿æœŸçš„æ›´æ–°ç»´æŠ¤éœ€æ±‚ã€‚å¦‚æœæ¯æœ‰ä¸€æ¬¡æ–°çš„æ›´æ–°å…¬å‘Šæˆ–è§„åˆ™æ–‡æ¡ˆå˜åŠ¨ï¼Œéƒ½éœ€è¦ä¿®æ”¹ä»£ç ï¼Œååˆ†çš„éº»çƒ¦ã€‚</p>\n<p>æ‰€ä»¥æˆ‘å°±æ€è€ƒğŸ¤”ï¼Œæ˜¯å¦å¯ä»¥é€šè¿‡ä¸€ä¸ªå¯è§†åŒ–çš„ç¼–è¾‘å™¨ï¼Œè®©éœ€æ±‚æ–¹é€šè¿‡é›¶é—¨æ§›çš„é…ç½®å½¢å¼è‡ªä¸»ç”Ÿæˆé¡µé¢ï¼Œä»è€Œé¿å…é‡å¤æ€§çš„ä½“åŠ›åŠ³åŠ¨ï¼Œè¾¾åˆ°è§£æ”¾å‰ç«¯åŒå­¦ä¸€éƒ¨åˆ†çš„ç”Ÿäº§åŠ›å»åšæ›´æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚æ‰€ä»¥ä¾¿æœ‰äº†æœ¬ç¯‡æ–‡ç« ï½</p>\n<p>å…ˆçœ‹ä¸‹å®ç°åçš„æ•ˆæœï¼š</p>\n<p><img src=\"/d96b4ae1231784f2009279391c7ace72/0.gif\"></p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å¸¦å¤§å®¶ä»éœ€æ±‚è‡³è½åœ°ï¼Œä»¥æˆ‘çš„ä¸ªäººæ€è·¯æ¥å®Œæˆä¸€ä¸ªå¯ç”¨çš„æ¨¡æ¿é¡µé¢ç”Ÿæˆå™¨âœŒï¸</p>\n<h2 id=\"éœ€æ±‚åˆ†æ\">éœ€æ±‚åˆ†æ</h2>\n<ol>\n<li>éœ€æ±‚æ–¹æ— éœ€æ‹¥æœ‰å¼€å‘åŸºç¡€</li>\n<li>éœ€æ±‚æ–¹é€šè¿‡å¯è§†åŒ–å½¢å¼æŸ¥çœ‹éœ€æ±‚é¡µé¢</li>\n<li>éœ€æ±‚æ–¹è‡ªä¸»å®Œæˆé¡µé¢å†…å®¹ä¿®æ”¹å¹¶ç”Ÿæˆå¯å¤ç”¨çš„htmlæ–‡ä»¶</li>\n</ol>\n<p><strong>ç”±äºä¸ªäººå°†è¯¥å·¥å…·å®šä¹‰ä¸ºç¼–è¯‘å·¥å…·è€Œéè¿è¡Œæ—¶è„šæœ¬ï¼Œæ•…æ ¹æ®ä»¥ä¸Šéœ€æ±‚ç»¼åˆåˆ†æï¼Œä¸€ä¸ªåŸºæœ¬å¯ç”¨çš„ç”Ÿæˆå™¨åŠŸèƒ½ç‚¹æ•´ç†å¦‚ä¸‹</strong></p>\n<ol>\n<li>æ•´ä¸ªå·¥å…·ç”±éšå¼çš„é…ç½®æ–‡ä»¶ä¸»å¯¼ï¼Œé¡µé¢çš„ç”Ÿæˆã€é…ç½®çš†ä»¥é…ç½®æ–‡ä»¶ä¸ºåª’ä»‹</li>\n<li>é…ç½®æ–‡ä»¶çš„å¯¼å…¥å¯¼å‡º</li>\n<li>ç»„ä»¶ç”Ÿæˆä¸å˜é‡æå–</li>\n<li>é…ç½®æ–‡ä»¶çš„è§£æï¼ˆç¼–è¯‘ä¸º.htmlï¼‰</li>\n</ol>\n<p>æ ¹æ®ä»¥ä¸Šéœ€æ±‚ï¼Œè¯¥å·¥å…·å¤§è‡´åŸå‹è‰å›¾å¦‚ä¸‹ï¼š</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b383c490d4a59cd92a4897b0904a4f74/e5a56/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.798882681564244%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACG0lEQVQoz02R2XKjMBRE+f9/mnlJvExswDhjVi1IgDYwBgTeDRFJ1dRIXV39oFNdV9fCGAshiqLgnBtnjCGE4jg24Tyc/2kYht7c/47W2srzXAgppKzrk0FVWTLO87zIi6zuqrY/NX1tdL7q6/Widdf3P9IGt7rmNL0e4/P2etxft9vzcnldr8/rnYpEtqlsiGyo6kjA1wk4uO7mcNiEoeN5dhDYlu8uKTjgyAPeOnVsCYBMksL3swJN03g53+7Xx2t8xOKjYLCuKzMiY9QESmPr4CwZxTmBcP+B7C01JAS5HwCyp2VEVTyrjEKxLKui172ZKMto07ScEyvYLUUGijRGn3+ot5OElJSyMEKZfzpLVqbimJ0GEYm1KvNhOJs/SpJE636G9/aaEAIRivY2225aCDsI1F8fs4McAGtj3iYmxOVKqRk2WzDvv5tT63O7xAgkcZh82s3vX9N6PS4W3dZBPBQtTLlP5RwisTLNfT+YZozR8VjPMA/eJ7UzGvBKv79Njjttt9r1UhmqAbJTwlsgBxQrAxdmt6YWAFCW1QyL4G1S9iS2F7yYYduZNhvt7jCPyo4UFWJHrDSN5Fqq7PF49n3ftu39/pxnnpuFPXJ7gIvu/W20nXGz6XYeZmGl80zCosSVziK1kpKO4ziZBX4759jCMKo4VYyIPBUpVoSoNC3zApAgwK4PXR+5QboLUgdCH4CD8R9F0f4Ll6SCmaALhfYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/b383c490d4a59cd92a4897b0904a4f74/799d3/1.png\"\n        srcset=\"/static/b383c490d4a59cd92a4897b0904a4f74/00d96/1.png 148w,\n/static/b383c490d4a59cd92a4897b0904a4f74/0b23c/1.png 295w,\n/static/b383c490d4a59cd92a4897b0904a4f74/799d3/1.png 590w,\n/static/b383c490d4a59cd92a4897b0904a4f74/2a3d6/1.png 885w,\n/static/b383c490d4a59cd92a4897b0904a4f74/ae92f/1.png 1180w,\n/static/b383c490d4a59cd92a4897b0904a4f74/e5a56/1.png 1432w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>é¦–å…ˆä½œä¸ºç¼–è¯‘å‹å·¥å…·ï¼Œéœ€è¦æœ‰å¿…è¦çš„é…ç½®æ–‡ä»¶ï¼ˆjsonï¼‰å¯¼å…¥å¯¼å‡ºç¼–è¯‘æŒ‰é’®ã€‚</li>\n<li>å·¦ä¾§ï¼Œæ˜¯ä¸€ä¸ªå¯æ‹–æ‹½å¼ç»„ä»¶ä½¿å¾—éœ€æ±‚æ–¹å¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚å¯¹é¡µé¢è¿›è¡Œå®šåˆ¶åŒ–é…ç½®ã€‚</li>\n<li>ä¸­é—´åˆ™ä½œä¸ºé¢„è§ˆæ¡†æä¾›å®æ–½é¢„è§ˆï¼Œæ–¹ä¾¿éœ€æ±‚æ–¹åœ¨é…ç½®æ—¶æŸ¥çœ‹æ•ˆæœ</li>\n<li>å³ä¾§åˆ™ä¸ºç»„ä»¶çš„é…ç½®é¡¹ï¼Œä¸åŒçš„ç»„ä»¶å¯æ ¹æ®éœ€æ±‚å¼€æ”¾ä¸åŒçš„é…ç½®ï¼Œä»è€Œæ‹“å±•äº†æ¨¡æ¿çš„å®šåˆ¶åŒ–éœ€æ±‚ã€‚</li>\n</ul>\n<p>è¿™é‡Œçš„å‰ç«¯æ¡†æ¶é€‰æ‹©React+TypeScriptåŸºç¡€æ¡†æ¶ï¼Œå½“ç„¶æŠ€æœ¯æ¡†æ¶é€‰æ‹©ä¸æ˜¯æœ¬æ–‡é‡ç‚¹ï¼Œæœ¬æ–‡ä¸»è¦æä¾›æ€è·¯ã€‚æ¥ä¸‹æ¥æˆ‘ä¼šæŒ‰ç…§ä¸Šè¿°çš„æ­¥éª¤æ¥å®ç°è¿™å‡ ä¸ªæ¨¡å—ã€‚</p>\n<h2 id=\"é…ç½®æ–‡ä»¶\">é…ç½®æ–‡ä»¶</h2>\n<h3 id=\"é…ç½®æ–‡ä»¶ç»“æ„\">é…ç½®æ–‡ä»¶ç»“æ„</h3>\n<p>ç»¼åˆå‰é¢çš„éœ€æ±‚åˆ†æï¼Œæˆ‘çš„é…ç½®æ–‡ä»¶è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"filename\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¯¼å‡ºhtmlæ—¶æ–‡ä»¶åç§°\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"global\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabæ ä¸­çš„åç§°ï¼Œå³document.title\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"css\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å…¨å±€css\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"æ–‡æœ¬æµåŠ è½½å®Œæˆåæ‰§è¡Œçš„js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"beforeLoadJs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¯é€‰å‚æ•°ï¼šæ–‡æœ¬æµåŠ è½½å‰çš„js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"externalCss\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"å¯é€‰å‚æ•°ï¼Œé‡Œé¢å¡«å…¥å­—ç¬¦ä¸²é“¾æ¥ï¼Œç”¨äºå¼•å…¥å¤–éƒ¨çš„css\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"externalJs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"å¯é€‰å‚æ•°ï¼Œé‡Œé¢å¡«å…¥å­—ç¬¦ä¸²é“¾æ¥ï¼Œç”¨äºå¼•å…¥å¤–éƒ¨çš„js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"globalTitle\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"æ‰€æœ‰ç»„ä»¶å‡å¯è®¿é—®çš„å…¨å±€å˜é‡\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"æˆ‘æ˜¯globalTitle\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// åˆå§‹é¡µé¢ç»„ä»¶</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºç»„ä»¶åŒºåˆ†</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ä¾§è¾¹æ ä¸­æ˜¾ç¤ºçš„å†…å®¹\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// è‡ªå®šä¹‰å±€éƒ¨å˜é‡</span>\n      <span class=\"token property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"aParam\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å³ä¾§ç»„ä»¶é…ç½®ä¸­æ˜¾ç¤ºçš„å†…å®¹\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"å¯ç¼–è¾‘çš„å€¼ï¼šæˆ‘æ˜¯aParam\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"htmlstr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;div>æˆ‘æ˜¯main &lt;%aParam%> &lt;/div>\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ç»„ä»¶åº“å¯å¤ç”¨ç»„ä»¶</span>\n  <span class=\"token property\">\"component\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ä¸mainç›¸åŒ\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"params\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"htmlstr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;div>&lt;%globalTitle%>æˆ‘æ˜¯component&lt;/div>\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é…ç½®æ–‡ä»¶çš„å†…å®¹çœ‹æ³¨é‡Šåº”è¯¥æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ç‚¹ï¼š</p>\n<ol>\n<li>å…¨å±€é…ç½®ï¼šå¯¹åº”htmlæ‰€å¿…é¡»çš„å†…å®¹</li>\n<li>ç»„ä»¶ï¼šç”¨äºéœ€æ±‚æ–¹æ ¹æ®ä¸åŒçš„éœ€æ±‚åŠ¨æ€é€‰æ‹©æ‰€éœ€è¦çš„htmlæ®µè½</li>\n<li>å˜é‡ï¼šç”¨äºéœ€æ±‚æ–¹å¯¹é¡µé¢å†…å®¹è¿›è¡Œçµæ´»é…ç½®</li>\n</ol>\n<h3 id=\"é…ç½®æ–‡ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º\">é…ç½®æ–‡ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º</h3>\n<p><strong>é…ç½®æ–‡ä»¶å¯¼å…¥ï¼š</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span>ChangeEvent<span class=\"token operator\">&lt;</span>HTMLInputElement<span class=\"token operator\">></span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> selectedFile <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>files <span class=\"token operator\">&amp;&amp;</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>selectedFile<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n  <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsText</span><span class=\"token punctuation\">(</span>selectedFile<span class=\"token punctuation\">)</span>\n  reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// è¿™é‡Œæ˜¯å°†jsonå­˜å…¥storeï¼Œæ–¹ä¾¿å„ä¸ªç»„ä»¶ç¼–è¾‘è¯»å–</span>\n      <span class=\"token function\">setJson2Store</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \t<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é…ç½®å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¸Šä¼ æ–‡ä»¶ç±»å‹æ˜¯å¦æ­£ç¡®!\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>é…ç½®æ–‡ä»¶å¯¼å‡ºï¼ˆä¸‹è½½ï¼‰ï¼š</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleFileDownload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">content<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> filename <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>filename<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">type</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n   <span class=\"token keyword\">const</span> eleLink <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span>\n   eleLink<span class=\"token punctuation\">.</span>download <span class=\"token operator\">=</span> filename\n   eleLink<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">\"none\"</span>\n   <span class=\"token keyword\">const</span> blob <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Blob</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>content<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n   eleLink<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> <span class=\"token constant\">URL</span><span class=\"token punctuation\">.</span><span class=\"token function\">createObjectURL</span><span class=\"token punctuation\">(</span>blob<span class=\"token punctuation\">)</span>\n   document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>eleLink<span class=\"token punctuation\">)</span>\n   eleLink<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n   document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>eleLink<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\t\n\n<span class=\"token comment\">// å¯¼å‡ºhtmlæ–‡ä»¶</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleHtmlDownload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// è¯¥æ–¹æ³•æ˜¯å°†å…¨å±€é…ç½®ä¸å±æ€§mainä¸­çš„å€¼ä¼ å…¥æ‰§è¡Œå‡½æ•°ï¼Œè§£ææˆhtmlå­—ç¬¦ä¸²å¯¼å‡º</span>\n  <span class=\"token comment\">// SData2Htmlå…·ä½“å®ç°ä¼šåœ¨ä¸‹æ–‡è®²è§£</span>\n  <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">SData2Html</span><span class=\"token punctuation\">(</span>globalSetting<span class=\"token punctuation\">,</span> mainTree<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">handleFileDownload</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">,</span> <span class=\"token string\">\"html\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// å¯¼å‡ºjsoné…ç½®æ–‡ä»¶</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleJsonDownload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token function\">setJson2String</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// è¯¥æ–¹æ³•å°±æ˜¯å°†storeä¸­çš„jsonå–å‡º</span>\n  <span class=\"token function\">handleFileDownload</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">,</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"ç»„ä»¶\">ç»„ä»¶</h2>\n<p>æ ¹æ®ä¹‹å‰æ¢³ç†çš„éœ€æ±‚å¯çŸ¥ï¼Œç»„ä»¶æ˜¯ <strong>ç”¨äºéœ€æ±‚æ–¹æ ¹æ®ä¸åŒçš„éœ€æ±‚åŠ¨æ€é€‰æ‹©æ‰€éœ€è¦çš„htmlæ®µè½å¹¶å¯¹å…¶å¯å˜é¡¹è¿›è¡Œç¼–è¾‘</strong></p>\n<ol>\n<li>ç»„ä»¶æ˜¯ä¸€ä¸ªhtmlå—ï¼Œå¯ä»¥åŠ¨æ€çš„é€‰æ‹©æ·»åŠ </li>\n<li>ç»„ä»¶æ‹¥æœ‰å¯è‡ªå®šä¹‰çš„å˜é‡</li>\n</ol>\n<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬é€šè¿‡æ ‡ç­¾æ’å€¼çš„å½¢å¼ä½¿å¾—è¯¥å·¥å…·å¯ä»¥åœ¨ç¼–è¯‘æ—¶æ’å…¥è‡ªå®šä¹‰çš„å˜é‡å€¼ã€‚</p>\n<p>å·¦ä¾§ç»„ä»¶ä»£ç å—çš„æ‹–æ‹½æ·»åŠ ï¼ˆæ‹–æ‹½ç»„ä»¶é€‰æ‹©ç¬¬ä¸‰æ–¹åº“ <code class=\"language-text\">react-beautiful-dnd</code>ï¼‰ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> DragDropContext<span class=\"token punctuation\">,</span> Droppable<span class=\"token punctuation\">,</span> Draggable<span class=\"token punctuation\">,</span> DropResult <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-beautiful-dnd\"</span>\n\n\n<span class=\"token keyword\">const</span> CompComponent<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">FC</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  \n  <span class=\"token comment\">// è¿™ä¸ªå‡½æ•°å°±æ˜¯åœ¨æ‹–æ‹½ç»“æŸåæ·»åŠ æ›´æ–°Mainæ•°ç»„ä¸­çš„ç»„ä»¶å—ï¼Œä¸æ˜¯é‡ç‚¹ï¼Œè¿™é‡Œå°±ä¸å ç”¨ç¯‡å¹…å•¦</span>\n  <span class=\"token comment\">// å¦‚æœæƒ³çœ‹è¯¥æ–¹æ³•çš„å…·ä½“å®ç°ï¼Œå¯è®¿é—®ï¼šhttps://github.com/Qionline/Qieditor/blob/master/src/components/main/comp/index.tsx#L14</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleDragEnd</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>comp-cmp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>comp-title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">ç»„ä»¶åº“</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">é¡µé¢æ¨¡æ¿</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DragDropContext</span></span> <span class=\"token attr-name\">onDragEnd</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleDragEnd<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* ç»„ä»¶åº“ï¼ˆå¯æ‹–æ‹½è‡³é¡µé¢æ¨¡æ¿ï¼‰ */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Droppable</span></span> <span class=\"token attr-name\">isDropDisabled</span> <span class=\"token attr-name\">droppableId</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>compLib<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">provided</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>provided<span class=\"token punctuation\">.</span>innerRef<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">provided</span><span class=\"token punctuation\">.</span><span class=\"token attr-value\">droppableProps</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span>componentsTree<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Draggable</span></span> <span class=\"token attr-name\">draggableId</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>t<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">index</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>t<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p<span class=\"token punctuation\">,</span> s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>p<span class=\"token punctuation\">.</span>innerRef<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">p</span><span class=\"token punctuation\">.</span><span class=\"token attr-value\">draggableProps</span><span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">p</span><span class=\"token punctuation\">.</span><span class=\"token attr-value\">dragHandleProps</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>t<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                        </span><span class=\"token punctuation\">{</span>t<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Draggable</span></span><span class=\"token punctuation\">></span></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span>provided<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Droppable</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          \n          </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* é¡µé¢æ¨¡æ¿ï¼ˆå¯ä¸Šä¸‹æ‹–æ‹½è°ƒæ•´ç»„ä»¶ä½ç½®ï¼‰ */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Droppable</span></span> <span class=\"token attr-name\">droppableId</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>compTemp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">provided<span class=\"token punctuation\">,</span> snapshot</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>provided<span class=\"token punctuation\">.</span>innerRef<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">provided</span><span class=\"token punctuation\">.</span><span class=\"token attr-value\">droppableProps</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                  </span><span class=\"token punctuation\">{</span>mainTree<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Draggable</span></span> <span class=\"token attr-name\">draggableId</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>t<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">index</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>t<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                      </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p<span class=\"token punctuation\">,</span> s</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n                            <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>p<span class=\"token punctuation\">.</span>innerRef<span class=\"token punctuation\">}</span></span>\n                            <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">p</span><span class=\"token punctuation\">.</span><span class=\"token attr-value\">draggableProps</span><span class=\"token punctuation\">}</span></span>\n                            <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">p</span><span class=\"token punctuation\">.</span><span class=\"token attr-value\">dragHandleProps</span><span class=\"token punctuation\">}</span></span>\n                          <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                            </span><span class=\"token punctuation\">{</span>t<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token punctuation\">)</span>\n                      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Draggable</span></span><span class=\"token punctuation\">></span></span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                  </span><span class=\"token punctuation\">{</span>provided<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n              <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Droppable</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DragDropContext</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å³ä¾§é…ç½®é¡¹å±•ç¤ºï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// å˜é‡è§£æç»„ä»¶ï¼šä»storeä¸­è·å–å˜é‡ï¼Œæ ¹æ®éœ€æ±‚æ–¹çš„ç¼–è¾‘åŠ¨æ€ä¿®æ”¹storeä¸­çš„é…ç½®æ–‡ä»¶</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">CompConfItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> idx<span class=\"token punctuation\">,</span> paramKey<span class=\"token punctuation\">,</span> paramValue <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> handleSetParamValue <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useDataStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChangedParams</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">res<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> ParamArrayParamTypeProp<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">handleSetParamValue</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> paramKey<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>paramValue<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">handleChangedParams</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// å…¨å±€é…ç½®</span>\n<span class=\"token keyword\">const</span> ConfGlobal<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">FC</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">å¯¼å‡ºæ–‡ä»¶å</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    \t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>globalSetting<span class=\"token punctuation\">.</span>filename<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleChangeFilename<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">é¡µé¢æ ‡é¢˜</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleChangeTitle<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    \n    /* è¿™é‡Œçš„ globalSetting.global.params æ˜¯ä»storeä¸­å–å‡ºçš„å…¨å±€å˜é‡ */\n    </span><span class=\"token punctuation\">{</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">[</span>v<span class=\"token punctuation\">]</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>el<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompConfItem</span></span> <span class=\"token attr-name\">idx</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">paramKey</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>v<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">paramValue</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>el <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// ç»„ä»¶é…ç½®</span>\n<span class=\"token keyword\">const</span> ConfComponent<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">FC</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>mainTree<span class=\"token punctuation\">[</span>componetSelectState<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">(</span><span class=\"token punctuation\">{</span>componetSelectState<span class=\"token punctuation\">}</span><span class=\"token plain-text\">)\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      /* è¿™é‡Œçš„ mainTre æ˜¯ä»storeä¸­å–å‡ºçš„ç»„ä»¶æ ‘ï¼Œå…¶ä¸­componetSelectState ä¸ºå½“å‰é€‰ä¸­çš„ç»„ä»¶ */\n      </span><span class=\"token punctuation\">{</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>mainTree<span class=\"token punctuation\">[</span>componetSelectState<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">è¯¥ç»„ä»¶æ— é…ç½®é¡¹</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>\n        Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>mainTree<span class=\"token punctuation\">[</span>componetSelectState<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> mainTree<span class=\"token punctuation\">[</span>componetSelectState<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">[</span>v<span class=\"token punctuation\">]</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>el<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompConfItem</span></span> <span class=\"token attr-name\">idx</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>componetSelectState<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">paramKey</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>v<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">paramValue</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>el <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>è¯¥æ®µä»£ç å‡ä¸ºå±•ç¤ºæ€§ä»£ç ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡å¯è§†åŒ–çš„å½¢å¼å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹</p>\n<h2 id=\"é…ç½®æ–‡ä»¶è§£æä¸æ¸²æŸ“\">é…ç½®æ–‡ä»¶è§£æä¸æ¸²æŸ“</h2>\n<p>è¯¥å·¥å…·çš„æ•´ä¸ªæµç¨‹çš†å§‹äºé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åœ¨å·¥å…·ä¸­å¯è§†åŒ–çš„æ˜¾å¼ç»™éœ€æ±‚æ–¹è¿›è¡Œé…ç½®ï¼Œé…ç½®å®Œæˆåå°†æ›´æ–°çš„é…ç½®æ–‡ä»¶è¿›è¡Œè§£æç¼–è¯‘</p>\n<p>ä¸Šæ–‡å·²å®Œæˆçš„é…ç½®æ–‡ä»¶çš„é¡µé¢å±•ç¤ºï¼Œæ¥ä¸‹æ¥å’±ä»¬å°±æ¥å®Œæˆè§£æç¼–è¯‘çš„éƒ¨åˆ†ã€‚</p>\n<h3 id=\"ã€è§£æã€‘ç»„ä»¶ä»£ç å—ç¼–è¯‘\">ã€è§£æã€‘ç»„ä»¶ä»£ç å—ç¼–è¯‘</h3>\n<p>ç±»å‹å®šä¹‰ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// å˜é‡ç±»å‹</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ParamTextType</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"text\"</span>\n  title<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  value<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ParamArrayType</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"array\"</span>\n  title<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  template<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  item<span class=\"token punctuation\">:</span> ParamArrayParamTypeProp\n  value<span class=\"token punctuation\">:</span> ParamArrayParamTypeProp<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> ParamArrayTypeProp <span class=\"token operator\">=</span> ParamTextType \n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> ParamTypeProp <span class=\"token operator\">=</span> ParamTextType <span class=\"token operator\">|</span> ParamArrayType\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ParamArrayParamTypeProp</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> ParamArrayTypeProp\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">componentsTreePramasProp</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> ParamTypeProp\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// å…¨å±€é…ç½®ç±»å‹å®šä¹‰</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">globalSettingProp</span> <span class=\"token punctuation\">{</span>\n  filename<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  global<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n    direction<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ltr\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"rtl\"</span>\n    bodyColor<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n    css<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n    js<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n    beforeLoadJs<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n    externalCss<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    externalJs<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    params<span class=\"token punctuation\">:</span> componentsTreePramasProp\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ç»„ä»¶é¡¹ç±»å‹å®šä¹‰</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">componentsTreeProp</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span>\n  name<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n  params<span class=\"token punctuation\">:</span> componentsTreePramasProp\n  htmlstr<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ç¼–è¯‘å®ç°ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// å†…éƒ¨å…³é”®å­—ã€ä½¿ç”¨è€…ç¦æ­¢ä½¿ç”¨å…³é”®å­—ä¸­å‡ºç°çš„å€¼ä½œä¸ºå˜é‡ï¼Œæ­¤å…³é”®å­—ç”¨äºè·å–ç»„ä»¶å—çš„domä»¥æ–¹ä¾¿jsæ“ä½œ</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">KEY_WORD</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">QID</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;%Qid%>\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">QIDDOM</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;%QidDom%>\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// é”™è¯¯å¤„ç†</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleArrayTypeError</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é…ç½®æ–‡ä»¶é”™è¯¯ï¼šç¦æ­¢arrayç±»å‹å‚æ•°ä¸­ä½¿ç”¨arrayç±»å‹å‚æ•°ä½œä¸ºå­å˜é‡!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// æ•°ç»„å˜é‡ç±»å‹è§£æ</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleArrayTmp</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">template<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> vArray<span class=\"token punctuation\">:</span> ParamArrayParamTypeProp<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  comonParams<span class=\"token punctuation\">:</span> componentsTreePramasProp</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> tmp<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> reg <span class=\"token operator\">=</span> <span class=\"token regex\">/&lt;%\\w*%>+/g</span>\n  <span class=\"token keyword\">const</span> paramsArr <span class=\"token operator\">=</span> template<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>paramsArr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    vArray<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      tmp<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>template<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  vArray<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> vTemp <span class=\"token operator\">=</span> template\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> value <span class=\"token keyword\">of</span> paramsArr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> param <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> vTemp <span class=\"token operator\">=</span> vTemp<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>comonParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>comonParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"array\"</span><span class=\"token punctuation\">)</span> <span class=\"token function\">handleArrayTypeError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        vTemp <span class=\"token operator\">=</span> vTemp<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> comonParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    tmp<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>vTemp<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ç¼–è¯‘ï¼šå­—ç¬¦ä¸²æ›¿æ¢ï¼ˆæ›¿æ¢&lt;% %>ä¸­çš„å†…å®¹ï¼‰</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TmpReplace</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> tmp<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> compParams<span class=\"token punctuation\">:</span> componentsTreePramasProp<span class=\"token punctuation\">,</span> globalParams<span class=\"token punctuation\">:</span> componentsTreePramasProp</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// åœ¨æ ¹divä¸­æ³¨å…¥qid &lt;div qid=`q${id}`>&lt;/div></span>\n  <span class=\"token comment\">// qid å¯ç”¨äºjsä¸­è·å–ç»„ä»¶å—çš„domï¼Œå½“ç„¶è¿™å¯æ ¹æ®éœ€æ±‚é€‰æ‹©æ˜¯å¦éœ€è¦</span>\n  <span class=\"token keyword\">const</span> qidReg <span class=\"token operator\">=</span> <span class=\"token regex\">/&lt;div/</span>\n  tmp <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>qidReg<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;div qid=\"q</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// å…³é”®å­—æ›¿æ¢</span>\n  tmp <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token constant\">KEY_WORD</span><span class=\"token punctuation\">.</span><span class=\"token constant\">QID</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">q</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  tmp <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token constant\">KEY_WORD</span><span class=\"token punctuation\">.</span><span class=\"token constant\">QIDDOM</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">document.querySelectorAll('[qid=\"q</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"]')[0]</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// åŒ¹é…è‡ªå®šä¹‰å˜é‡æ›¿æ¢</span>\n  <span class=\"token keyword\">const</span> reg <span class=\"token operator\">=</span> <span class=\"token regex\">/&lt;%\\w*%>+/g</span>\n  <span class=\"token keyword\">const</span> paramsArr <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>paramsArr<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> tmp\n  \n  <span class=\"token comment\">// æŒ‰ç…§å±‚çº§æ›¿æ¢å˜é‡å€¼</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> value <span class=\"token keyword\">of</span> paramsArr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> param <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>compParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      tmp <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        compParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"array\"</span>\n          <span class=\"token operator\">?</span> <span class=\"token function\">handleArrayTmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>compParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> ParamArrayType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>template<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>compParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> ParamArrayType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> compParams<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>compParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>globalParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      tmp <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        globalParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"array\"</span>\n          <span class=\"token operator\">?</span> <span class=\"token function\">handleArrayTmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>globalParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> ParamArrayType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>template<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>globalParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> ParamArrayType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> globalParams<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>globalParams<span class=\"token punctuation\">[</span>param<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> tmp\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ã€æ¸²æŸ“ã€‘æ–‡ä»¶é¢„è§ˆä¸ç”Ÿæˆ\">ã€æ¸²æŸ“ã€‘æ–‡ä»¶é¢„è§ˆä¸ç”Ÿæˆ</h3>\n<p>é¢„è§ˆå’Œç”Ÿæˆçš„é€»è¾‘ç›¸ä¼¼ï¼Œå‰è€…æ˜¯å°†é…ç½®æ–‡ä»¶è½¬åŒ–ä¸ºhtmlå­—ç¬¦ä¸²æ’å…¥iframeè¿›è¡Œé¢„è§ˆï¼Œåè€…åˆ™æ˜¯å°†ç”Ÿæˆçš„htmlå­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ–‡ä»¶å¹¶ä¸‹è½½ã€‚ä¸‹é¢é€šè¿‡ä»£ç å±•ç¤ºé…ç½®æ–‡ä»¶è½¬åŒ–ä¸ºhtmléƒ¨åˆ†ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">SData2HtmlFuncProp</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">(</span>globalSetting<span class=\"token punctuation\">:</span> globalSettingProp<span class=\"token punctuation\">,</span> mainTree<span class=\"token punctuation\">:</span> componentsTreeProp<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">const</span> SData2Html<span class=\"token punctuation\">:</span> <span class=\"token function-variable function\">SData2HtmlFuncProp</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">globalSetting<span class=\"token punctuation\">,</span> mainTree</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> main <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token comment\">// ä¾æ¬¡æŒ‰ç…§Mainä¸­çš„ç»„ä»¶è¿›è¡Œè§£æä¸ºhtmlå­—ç¬¦ä¸²</span>\n  mainTree<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// TmpReplaceè§ ä¸Šæ–‡ç»„ä»¶ä»£ç å—ç¼–è¯‘ éƒ¨åˆ†</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">TmpReplace</span><span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">.</span>htmlstr<span class=\"token punctuation\">,</span> el<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">,</span> globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">)</span>\n    main <span class=\"token operator\">+=</span> res\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> beforeLoadJs <span class=\"token operator\">=</span> globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>beforeLoadJs <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;script></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>beforeLoadJs<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/script></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token keyword\">const</span> externalCss <span class=\"token operator\">=</span> globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>externalCss <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>externalCss<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> externalJs <span class=\"token operator\">=</span> globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>externalJs <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>externalJs<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  &lt;!DOCTYPE html>\n  &lt;html>\n    &lt;head>\n      &lt;meta charset=\"UTF-8\" />\n      &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover\" />\n      &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" />\n      &lt;title></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>title<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/title>\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>externalCss<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;link rel=\"stylesheet\" href=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>v<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\" /></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>beforeLoadJs<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    &lt;/head>\n    &lt;style>body{background-color:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>bodyColor<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;direction:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>direction<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">}&lt;/style>\n    </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>css <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;style></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>css<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/style></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    &lt;body>\n      &lt;div id=\"qiapp\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>main<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/div>\n    &lt;/body>\n    </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>externalJs<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;script src=\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>v<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\">&lt;/script></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>js <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;script></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>globalSetting<span class=\"token punctuation\">.</span>global<span class=\"token punctuation\">.</span>js<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/script></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n    &lt;/html>\n  </span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å­—ç¬¦ä¸²ç”Ÿæˆåï¼Œåªéœ€è¦åŠ¨æ€æ·»åŠ æ›´æ–°ifameå³å¯å®Œæˆé¢„è§ˆå•¦ã€‚</p>\n<p>ä»¥ä¸Šï¼Œæ•´ä¸ªç¼–è¾‘å™¨å®ç°çš„æ ¸å¿ƒæ€è·¯å°±éƒ½å·²å®Œæˆ ğŸ‰</p>\n<h2 id=\"å®Œæ•´ä»£ç \">å®Œæ•´ä»£ç </h2>\n<p>å®Œæ•´ä»£ç æˆ‘å·²å®ç°å¹¶ä¸Šä¼ è‡³è¯¥ <a href=\"https://github.com/Qionline/Qieditor\">ä»“åº“</a>ï¼Œ</p>\n<p>å¦‚æœå¤§å®¶ä¹Ÿæœ‰ç±»ä¼¼çš„éœ€æ±‚éœ€è¦åº”ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œ æˆ–è€…å…·ä½“å®ç°ä¸Šéœ€è¦æœ‰æ‰€å‚è€ƒçš†å¯è®¿é—®æ­¤ä»“åº“å…±åŒäº¤æµå­¦ä¹ ï½</p>\n<p>åŒæ—¶ï¼Œç”±äºæœ¬èº«jsonæ–‡ä»¶çš„ç¼–å†™è¾ƒä¸ºç¹çã€è°ƒè¯•æ€§è¾ƒå·®ã€‚æˆ‘å†™äº†ä¸€ä¸ªç®€æ˜“çš„å¼€å‘å·¥å…·ï¼Œæ–¹ä¾¿å¤§å®¶ä»¥è¿‘ä¼¼çº¯åŸç”Ÿçš„å¼€å‘æ¨¡å¼æ¥å¼€å‘&#x26;è°ƒè¯•æ¨¡æ¿æ–‡ä»¶ï¼Œå¦‚æœ‰éœ€è¦å¯<a href=\"https://github.com/Qionline/Qieditor-template\"> ç‚¹å‡»æ­¤å¤„ </a>æŸ¥çœ‹ã€‚</p>","headings":[{"value":"éœ€æ±‚åˆ†æ","depth":2},{"value":"é…ç½®æ–‡ä»¶","depth":2},{"value":"é…ç½®æ–‡ä»¶ç»“æ„","depth":3},{"value":"é…ç½®æ–‡ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º","depth":3},{"value":"ç»„ä»¶","depth":2},{"value":"é…ç½®æ–‡ä»¶è§£æä¸æ¸²æŸ“","depth":2},{"value":"ã€è§£æã€‘ç»„ä»¶ä»£ç å—ç¼–è¯‘","depth":3},{"value":"ã€æ¸²æŸ“ã€‘æ–‡ä»¶é¢„è§ˆä¸ç”Ÿæˆ","depth":3},{"value":"å®Œæ•´ä»£ç ","depth":2}],"frontmatter":{"title":"ã€æ‰‹æ‘¸æ‰‹ã€‘å†™ä¸€ä¸ªæ¨¡æ¿é¡µé¢ç”Ÿæˆå™¨","date":"May 09, 2021","description":"ä¸çŸ¥å¤§å®¶æ˜¯å¦æœ‰ç€è¿™æ ·çš„éœ€æ±‚ï¼Œä¸€ä¸ªé€šç”¨æ¨¡æ¿çš„å…¬å‘Šç±»ã€è§„åˆ™ç±»çš„é™æ€é¡µé¢æœ‰ç€é•¿æœŸçš„æ›´æ–°ç»´æŠ¤éœ€æ±‚ã€‚å¦‚æœæ¯æœ‰ä¸€æ¬¡æ–°çš„æ›´æ–°å…¬å‘Šæˆ–è§„åˆ™æ–‡æ¡ˆå˜åŠ¨ï¼Œéƒ½éœ€è¦ä¿®æ”¹ä»£ç ï¼Œååˆ†çš„éº»çƒ¦ã€‚æ‰€ä»¥æˆ‘å°±æ€è€ƒğŸ¤”ï¼Œæ˜¯å¦å¯ä»¥é€šè¿‡ä¸€ä¸ªå¯è§†åŒ–çš„ç¼–è¾‘å™¨ï¼Œè®©éœ€æ±‚æ–¹é€šè¿‡é›¶é—¨æ§›çš„é…ç½®å½¢å¼è‡ªä¸»ç”Ÿæˆé¡µé¢ï¼Œä»è€Œé¿å…é‡å¤æ€§çš„ä½“åŠ›åŠ³åŠ¨ï¼Œè¾¾åˆ°è§£æ”¾å‰ç«¯åŒå­¦ä¸€éƒ¨åˆ†çš„ç”Ÿäº§åŠ›å»åšæ›´æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚","tags":["react","typescript"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/2021_05_09_qieditor/","previous":{"fields":{"slug":"/post/2020_09_21_mzsf_13/"},"frontmatter":{"title":"ã€åŠ¨å›¾ç®—æ³•ã€‘ï¼ˆåŠ¨æ€è§„åˆ’ç¯‡ï¼‰ï¼šæœ€é•¿å›æ–‡å­ä¸²"}},"next":null}}}