{"componentChunkName":"component---src-templates-post-js","path":"/post/2020_04_21_js_ast/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby OMG Blog","post":{"pageviews":true}}},"markdownRemark":{"id":"dc7e4d96-856a-528f-8f73-7895fcfe6825","excerpt":"æƒ³çœ‹ä»£ç çš„ç›´æ¥ä¸‹è½½é¡¹ç›®å³å¯ï¼Œé‡Œé¢æ³¨é‡Šå†™çš„è¿˜ç®—è¯¦ç»†ã€‚\né¡¹ç›®åœ°å€ï¼šhttps://github.com/betterTisen/oreojsâ€¦","html":"<blockquote>\n<p>æƒ³çœ‹ä»£ç çš„ç›´æ¥ä¸‹è½½é¡¹ç›®å³å¯ï¼Œé‡Œé¢æ³¨é‡Šå†™çš„è¿˜ç®—è¯¦ç»†ã€‚\né¡¹ç›®åœ°å€ï¼š<a href=\"https://github.com/betterTisen/oreojs\">https://github.com/betterTisen/oreojs</a></p>\n</blockquote>\n<h2 id=\"ç¼–è¯‘åŸç†åŸºç¡€\">ç¼–è¯‘åŸç†åŸºç¡€</h2>\n<p>ç¼–è¯‘åŸç†æ˜¯è®¡ç®—æœºå­¦ç§‘ä¸­ä¸€ä¸ªå¾ˆä¼Ÿå¤§å¾ˆé‡è¦çš„æ¦‚å¿µï¼šå³è®¡ç®—æœºè¯†åˆ«è‡ªç„¶è¯­è¨€çš„ä¸€ä¸ªè§£æè¿‡ç¨‹ã€‚å•ç‹¬æ‹å‡ºæ¥è¯´çš„è¯ä¹Ÿå¾ˆéš¾æ¦‚æ‹¬å…¶å®Œæ•´çš„çŸ¥è¯†ç‚¹ï¼Œè€Œä¸”ç¬”è€…ä¹Ÿåªæ˜¯çŸ¥å…¶çš®æ¯›è€Œå·²ï¼ˆè¿˜éœ€åŠªåŠ› ğŸ’ªï¼‰ã€‚ã€‚ã€‚ä½†æ˜¯é€šä¿—ä¸€ç‚¹æ¦‚æ‹¬çš„è¯ï¼Œå°±æ˜¯ä¸ºä»€ä¹ˆ<strong>ç”µè„‘å¯ä»¥å°†ä¸€ä¸² js å­—ç¬¦ä¸²æ­£ç¡®çš„è®©æœºå™¨è¯†åˆ«ã€‚ä»è€Œå¾—åˆ°ä½ æƒ³è¦çš„æ•ˆæœ</strong>ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„å¤§ä½“è§£ææ­¥éª¤æ˜¯æ€æ ·çš„ã€‚</p>\n<h3 id=\"è§£ææ­¥éª¤\">è§£ææ­¥éª¤</h3>\n<ol>\n<li>js å­—ç¬¦ä¸²é€šè¿‡è¯æ³•åˆ†æå’Œå¥æ³•åˆ†æè§£ææˆä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘ï¼ˆé€šè¿‡ç¬¬ä¸‰æ–¹åº“ acorn å®ç°ï¼‰</li>\n<li>æ ¹æ®æŠ½è±¡è¯­æ³•æ ‘å¯¹ä¸åŒ type è¿›è¡Œç›¸åº”çš„è§£æï¼ˆè¿™é‡Œæ˜¯æœ¬ç¯‡æ–‡ç« éœ€è¦å®Œæˆçš„ï¼‰</li>\n</ol>\n<h3 id=\"javascript-è¯­æ³•æ ‘-type-çš„åŸºæœ¬è®¤çŸ¥\">JavaScript è¯­æ³•æ ‘ type çš„åŸºæœ¬è®¤çŸ¥</h3>\n<p>æˆ‘æ¨èè¿™ä¸€ç¯‡æ–‡ç« ï¼Œå¤§å®¶å¯ä»¥å¿«é€Ÿé¢„è§ˆä¸€ä¸‹ï¼Œå¯¹ js ast çš„å¸¸è§ type æ··ä¸ªçœ¼ç†Ÿï¼Œä¸ç„¶ä¸€å¼€å§‹å°±æ’¸ä»£ç å¯èƒ½ä¼šä¸çŸ¥å¦‚ä½•ä¸Šæ‰‹ã€‚ã€‚</p>\n<h2 id=\"å‡†å¤‡å·¥ä½œ\">å‡†å¤‡å·¥ä½œ</h2>\n<ul>\n<li>ç¬¬ä¸‰æ–¹åº“ï¼šacorn</li>\n<li>ä¸€ä¸ªè¯­æ³•æ ‘ç”Ÿæˆçš„åœ¨çº¿é¢„è§ˆå·¥å…·ï¼š<a href=\"https://astexplorer.net\">https://astexplorer.net</a></li>\n</ul>\n<p>å»ºè®®å„ä½å¯ä»¥å…ˆåœ¨ä¸Šé¢çš„ç½‘å€ä¸­éšæ„çš„å†™ä¸€æ®µç®€å•çš„ js ä»£ç ï¼Œç„¶åçœ‹ä¸€çœ‹ç”Ÿæˆçš„è¯­æ³•æ ‘ç»“æ„ï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ª json å¯¹è±¡ï¼‰ã€‚<em>ä¸»è¦æ³¨æ„æ¯ä¸€é¡¹çš„ typeï¼Œstart å’Œ end å¯ä»¥å¿½ç•¥ï¼Œæˆ‘ä»¬ç”¨ä¸åˆ°</em></p>\n<p>çœ‹ä¸€ä¸‹å®ç°åçš„æ•ˆæœã€‚ç„¶åå°±å¼€å§‹æ’¸ä»£ç å§</p>\n<p><img src=\"/fb1c07e47db09578a5829a4a5644e163/1.gif\" alt=\"result\"></p>\n<h2 id=\"èŠ‚ç‚¹éå†å™¨ï¼ˆnodeiteratorï¼‰\">èŠ‚ç‚¹éå†å™¨ï¼ˆnodeIteratorï¼‰</h2>\n<p>é¦–å…ˆï¼Œé€šè¿‡è¯­æ³•æ ‘çš„ç»“æ„å¯çŸ¥ï¼Œæˆ‘ä»¬è¦å¤„ç†çš„è¿™ä¸ª json æ˜¯ä¸€ä¸ªè¾ƒæ·±çš„æ ‘å½¢ç»“æ„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªéå†å™¨ï¼Œæ¥ä¸€å±‚ä¸€å±‚çš„éå†èŠ‚ç‚¹ã€‚çœ‹ä¸‹å®ç°çš„ä»£ç ï¼Œå…¶ä¸­ scope å’Œ NodeHandlerï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢çš„æ®µè½å’Œå¤§å®¶è¯¦ç»†ä»‹ç»ï¼Œç°åœ¨ä½ åªéœ€è¦çŸ¥é“ï¼Œnode æ˜¯è¯­æ³•æ ‘çš„ jsonï¼Œtraverse æ˜¯æ ¹æ® json çš„ type è¿›è¡Œä¸åŒè§£æçš„æ–¹æ³•</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">NodeIterator</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node<span class=\"token punctuation\">,</span> scope</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//nodeï¼Œå°±æ˜¯æ ‘ï¼Œéšç€èŠ‚ç‚¹çš„éå†ï¼Œä¼šæœ‰ä¸åŒçš„å­æ ‘è¢«ä¼ å…¥</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node <span class=\"token operator\">=</span> node\n    <span class=\"token comment\">//å½“å‰çš„ä½œç”¨åŸŸ</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scope <span class=\"token operator\">=</span> scope\n    <span class=\"token comment\">//å¯¹å„ç±»èŠ‚ç‚¹çš„å¤„ç†</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodeHandler <span class=\"token operator\">=</span> NodeHandler\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ç”¨äºä½œç”¨åŸŸå¤„ç†ï¼Œåé¢ä¼šè¯´</span>\n  <span class=\"token function\">createScope</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Scope</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scope<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node<span class=\"token punctuation\">,</span> opt <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//å¦‚æœoptä¼ å…¥typeï¼Œåˆ™ä½¿ç”¨ä¼ å…¥çš„typeï¼Œè¿™é‡Œçš„æ„æ€æ˜¯å¦‚æœå­æ ‘æ˜¯ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œåˆ™ä½¿ç”¨å…¨æ–°çš„ä½œç”¨åŸŸï¼Œå¦åˆ™ï¼Œå…¶ä½œç”¨åŸŸä»æ˜¯å½“å‰ä½œç”¨åŸŸ</span>\n    <span class=\"token keyword\">const</span> scope <span class=\"token operator\">=</span> opt<span class=\"token punctuation\">.</span>scope <span class=\"token operator\">?</span> opt<span class=\"token punctuation\">.</span>scope <span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scope\n    <span class=\"token keyword\">const</span> _evel <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nodeHandler<span class=\"token punctuation\">[</span>node<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">const</span> nodeIterator <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NodeIterator</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> scope<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>_evel<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Unknown node type \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>node<span class=\"token punctuation\">.</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">_evel</span><span class=\"token punctuation\">(</span>nodeIterator<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"ä½œç”¨åŸŸå¤„ç†ï¼ˆscopeï¼‰\">ä½œç”¨åŸŸå¤„ç†ï¼ˆscopeï¼‰</h2>\n<p>è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¸Šé¢çš„èŠ‚ç‚¹éå†å™¨å¦‚æœæ²¡æœ‰å¤„ç†ä½œç”¨åŸŸä¼šæ€æ ·ï¼Ÿé‚£ä¸æ˜¯æ¯ä¸€ä¸ªå£°æ˜çš„å˜é‡éƒ½ä¼šå¤„äºå…¨å±€ä¹‹ä¸­å—ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¯¹çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»æ¥å¯¹ä½œç”¨åŸŸè¿›è¡Œç®¡ç†ã€‚ä¸‹é¢çš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä½œç”¨åŸŸå¤„ç†ç±»ï¼Œä¸è¦çœ‹å®ƒè¿™ä¹ˆé•¿ï¼Œå…¶å®å¾ˆç®€å•<br>\nçœ‹ <strong>constructor</strong>ï¼Œè¿™ä¸ªç±»åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæœ‰ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯è‡ªå·±çš„ä½œç”¨åŸŸï¼Œçˆ¶çº§ä½œç”¨åŸŸï¼Œå…¨å±€ä½œç”¨åŸŸã€‚ä¸‹é¢çš„ get æ–¹æ³•ï¼Œå³æ˜¯è·å–å˜é‡çš„å€¼ï¼Œåœ¨å½“å‰ä½œç”¨åŸŸæ‰¾ï¼Œæ‰¾ä¸åˆ°å°±åˆ°çˆ¶çº§æ‰¾ï¼ˆæ³¨æ„ï¼Œå¾€çˆ¶çº§æŸ¥æ‰¾æ˜¯ä¸€ä¸ªé€’å½’ï¼‰ï¼Œæœ€åæ‰¾åˆ°å…¨å±€ï¼Œset æ–¹æ³•ä¹Ÿä¸€æ ·</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Scope</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parentScope</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentScope <span class=\"token operator\">=</span> parentScope\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>globalDeclaration <span class=\"token operator\">=</span> globalMap\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// æ¯æ¬¡éƒ½æ–°å»ºä¸€ä¸ªå…¨æ–°çš„ä½œç”¨åŸŸ</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// è·å–å˜é‡å€¼</span>\n  <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentScope<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentScope<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>globalDeclaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>globalDeclaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReferenceError</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not defined</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// å¯¹å·²å®šä¹‰å˜é‡èµ‹å€¼</span>\n  <span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentScope<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentScope<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>globalDeclaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>globalDeclaration<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReferenceError</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is not defined</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// æŠ½è±¡äº†ä¸‰ç§å˜é‡å®šä¹‰æ–¹å¼</span>\n  <span class=\"token function\">declare</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> kind <span class=\"token operator\">=</span> <span class=\"token string\">\"var\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>kind <span class=\"token operator\">===</span> <span class=\"token string\">\"var\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">varDeclare</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>kind <span class=\"token operator\">===</span> <span class=\"token string\">\"let\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">letDeclare</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>kind <span class=\"token operator\">===</span> <span class=\"token string\">\"const\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">constDeclare</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">OreoJs: Invalid Variable Declaration Kind of \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>kind<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">varDeclare</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ç”±äºvarç±»å‹æœ‰ç€å˜é‡æå‡çš„ç‰¹æ€§ã€‚åœ¨è¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨letçš„æ–¹å¼æ¥è§£ævarï¼Œé¡¾è¿™é‡Œçš„varå¹¶æ²¡æœ‰åšå˜é‡æå‡</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">letDeclare</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">letDeclare</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ä¸å…è®¸é‡å¤å®šä¹‰</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SyntaxError</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Identifier </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> has already been declared</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleValue</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> <span class=\"token string\">\"let\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">constDeclare</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ä¸å…è®¸é‡å¤å®šä¹‰</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SyntaxError</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Identifier </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> has already been declared</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleValue</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> <span class=\"token string\">\"const\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>declaration<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¸Šé¢çš„ä»£ç ä¸­æœ‰ä¸€ä¸ª SimpleValueï¼Œå’Œ ä¸€ä¸ª globalMapã€‚</p>\n<ul>\n<li>SimpleValueï¼šå®šä¹‰å˜é‡å€¼ï¼Œä¸»è¦ç”¨äºå¤„ç†å¸¸é‡</li>\n<li>globalMapï¼šæ³¨å…¥å…¨å±€å˜é‡</li>\n</ul>\n<p>æ²¡å•¥å¥½è¯´çš„ï¼Œç›´æ¥è´´ä»£ç </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// SimpleValue.js</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleValue</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> kind <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>kind <span class=\"token operator\">=</span> kind\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ç¦æ­¢é‡æ–°å¯¹constç±»å‹å˜é‡èµ‹å€¼</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>kind <span class=\"token operator\">===</span> <span class=\"token string\">\"const\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\" is read-only</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// globalMap.js</span>\n<span class=\"token keyword\">import</span> SimpleValue <span class=\"token keyword\">from</span> <span class=\"token string\">\"../util/simpleValue\"</span>\n\n<span class=\"token keyword\">const</span> globalMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  window<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"window\"</span><span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  console<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"console\"</span><span class=\"token punctuation\">,</span> console<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  Date<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SimpleValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Date\"</span><span class=\"token punctuation\">,</span> Date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"å„ç±»èŠ‚ç‚¹å¤„ç†ï¼ˆnodehandlerï¼‰\">å„ç±»èŠ‚ç‚¹å¤„ç†ï¼ˆnodeHandlerï¼‰</h2>\n<p>å½“ä½œç”¨åŸŸçš„é—®é¢˜è§£å†³ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸€ä¸ªç¹å¤çš„å·¥ä½œäº†ï¼šå¯¹ä¸åŒ type çš„ tree è¿›è¡Œè§£æã€‚è¿™é‡Œçš„ nodeHandler å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„å¯¹å„ç±»èŠ‚ç‚¹çš„å¤„ç†</p>\n<p><strong>æ ¹èŠ‚ç‚¹å¤„ç†å™¨ Program</strong></p>\n<p>æ ¹èŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥åªéœ€è¦å¯¹æ•°ç»„è¿›è¡Œå¾ªç¯è§£é‡Šå³å¯</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">Program</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nodeIterator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> e <span class=\"token keyword\">of</span> nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    nodeIterator<span class=\"token punctuation\">.</span><span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>å˜é‡å®šä¹‰èŠ‚ç‚¹å¤„ç†å™¨ VariableDeclaration</strong></p>\n<p>è¿™é‡ŒåŸºæœ¬å°±æ˜¯æ ¹æ®å®šä¹‰å˜é‡çš„æ•°é‡ä»¥åŠç±»å‹ï¼Œå¾ªç¯è¿›è¡Œèµ‹å€¼</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">VariableDeclaration</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nodeIterator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> kind <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> nodeIterator<span class=\"token punctuation\">.</span>node\n  <span class=\"token keyword\">const</span> variableNodes <span class=\"token operator\">=</span> nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>declarations\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> variableNode <span class=\"token keyword\">of</span> variableNodes<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> k <span class=\"token operator\">=</span> variableNode<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>name\n    <span class=\"token keyword\">const</span> v <span class=\"token operator\">=</span> variableNode<span class=\"token punctuation\">.</span>init <span class=\"token operator\">?</span> nodeIterator<span class=\"token punctuation\">.</span><span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>variableNode<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">undefined</span>\n    nodeIterator<span class=\"token punctuation\">.</span>scope<span class=\"token punctuation\">.</span><span class=\"token function\">declare</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">,</span> kind<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>æ ‡è¯†ç¬¦èŠ‚ç‚¹å¤„ç†å™¨ Identifier</strong></p>\n<p>æ³¨æ„ï¼Œè¿™é‡Œçš„æ–¹æ³•åªç”¨äºè¯»å–å€¼</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// æ ‡è¯†ç¬¦(ç”¨äºè¯»å–å€¼)</span>\n<span class=\"token function\">Identifier</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nodeIterator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> nodeIterator<span class=\"token punctuation\">.</span>node\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">===</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">undefined</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> nodeIterator<span class=\"token punctuation\">.</span>scope<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>å­—ç¬¦èŠ‚ç‚¹å¤„ç†å™¨ Literal</strong></p>\n<p>å­—é¢é‡ç›´æ¥è¿”å›å°±å¥½</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//å­—é¢é‡</span>\n<span class=\"token function\">Literal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nodeIterator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>value\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>è¡¨è¾¾å¼è°ƒç”¨èŠ‚ç‚¹å¤„ç†å™¨ CallExpression</strong></p>\n<p>å‡½æ•°è°ƒç”¨ï¼Œè¿™é‡Œæ³¨æ„æœ€åreturnçš„ç»“æœéœ€è¦è®©thisæŒ‡å‘func</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼ï¼Œå³è¡¨ç¤ºäº† func(1, 2) è¿™ä¸€ç±»å‹çš„è¯­å¥</span>\n<span class=\"token function\">CallExpression</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nodeIterator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> func <span class=\"token operator\">=</span> nodeIterator<span class=\"token punctuation\">.</span><span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> args <span class=\"token operator\">=</span> nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>arguments<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arg</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> nodeIterator<span class=\"token punctuation\">.</span><span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">let</span> value\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"MemberExpression\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    value <span class=\"token operator\">=</span> nodeIterator<span class=\"token punctuation\">.</span><span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>è¡¨è¾¾å¼èŠ‚ç‚¹å¤„ç†å™¨ MemberExpression</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// æˆå‘˜è¡¨è¾¾å¼èŠ‚ç‚¹ï¼Œå³è¡¨ç¤ºå¼•ç”¨å¯¹è±¡æˆå‘˜çš„è¯­å¥</span>\n<span class=\"token function\">MemberExpression</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nodeIterator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> nodeIterator<span class=\"token punctuation\">.</span><span class=\"token function\">traverse</span><span class=\"token punctuation\">(</span>nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> nodeIterator<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>property\n  <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å…¶ä»–çš„èŠ‚ç‚¹å¤„ç†æ–¹å¼å¯ä»¥é€šè¿‡é¡¶éƒ¨çš„åœ°å€å»çœ‹ï½è¿™é‡ŒçŸ¥è¯†åˆ—å‡ºäº†å¸¸è§çš„èŠ‚ç‚¹å¤„ç†æ–¹å¼ï¼Œåªè¦é€æ­¥å®Œå–„è¿™é‡Œçš„æ–¹æ³•ï¼Œè®©è¿™ä¸ªå¯¹è±¡å¯¹å„ç±»èŠ‚ç‚¹éƒ½æ”¯æŒè§£æï¼Œå°±å®Œæˆäº†ä¸€ä¸ªåŸºæœ¬çš„è§£é‡Šå™¨</p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>æ€»ç»“ä¸€ä¸‹ï¼Œå†™è¿™ä¸ªè§£é‡Šå™¨æœ€å¤æ‚çš„å°±æ˜¯å¤„ç†ä½œç”¨åŸŸçš„é—®é¢˜ï¼Œç†è§£äº†è¿™ä¸ªè§£æå™¨é€’å½’è§£é‡Šæ ‘çš„æ€è·¯åï¼Œå°±æ˜¯å»å†™NodeIteratorä¸­ä¸åŒtypeæ‰€å¯¹åº”çš„æ–¹æ³•å°±è¡Œå•¦ï¼Œçœ‹å®Œè¿™è¾¹æ–‡ç« åè¿˜ä¸äº†è§£çš„è¯å¯ä»¥æŠŠgithubçš„ä»£ç æ‹‰ä¸‹æ¥ï¼Œé€šè¿‡æ•´ä¸ªé¡¹ç›®å»çœ‹æ›´å®¹æ˜“ç†è§£ä¸€äº›ï¼Œæ¯•ç«Ÿæ–‡ç« ç¯‡å¹…æœ‰é™ã€‚</p>\n<h2 id=\"å‚è€ƒèµ„æ–™\">å‚è€ƒèµ„æ–™</h2>\n<p><a href=\"%E5%89%8D%E7%AB%AF%E4%B8%8E%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%94%A8JS%E5%86%99%E4%B8%80%E4%B8%AAJS%E8%A7%A3%E9%87%8A%E5%99%A8\">å‰ç«¯ä¸ç¼–è¯‘åŸç†â€”â€”ç”¨ JS å†™ä¸€ä¸ª JS è§£é‡Šå™¨</a></p>\n<p><a href=\"https://github.com/jrainlau/canjs\">jrainlau/canjs</a></p>","headings":[{"value":"ç¼–è¯‘åŸç†åŸºç¡€","depth":2},{"value":"è§£ææ­¥éª¤","depth":3},{"value":"JavaScript è¯­æ³•æ ‘ type çš„åŸºæœ¬è®¤çŸ¥","depth":3},{"value":"å‡†å¤‡å·¥ä½œ","depth":2},{"value":"èŠ‚ç‚¹éå†å™¨ï¼ˆnodeIteratorï¼‰","depth":2},{"value":"ä½œç”¨åŸŸå¤„ç†ï¼ˆscopeï¼‰","depth":2},{"value":"å„ç±»èŠ‚ç‚¹å¤„ç†ï¼ˆnodeHandlerï¼‰","depth":2},{"value":"æ€»ç»“","depth":2},{"value":"å‚è€ƒèµ„æ–™","depth":2}],"frontmatter":{"title":"æ–°ç“¶æ—§é…’ï¼šå¦‚ä½•ç”¨jså†™ä¸€ä¸ªjsè§£é‡Šå™¨","date":"April 21, 2020","description":"ç¼–è¯‘åŸç†æ˜¯è®¡ç®—æœºå­¦ç§‘ä¸­ä¸€ä¸ªå¾ˆä¼Ÿå¤§å¾ˆé‡è¦çš„æ¦‚å¿µï¼šå³è®¡ç®—æœºè¯†åˆ«è‡ªç„¶è¯­è¨€çš„ä¸€ä¸ªè§£æè¿‡ç¨‹ã€‚å•ç‹¬æ‹å‡ºæ¥è¯´çš„è¯ä¹Ÿå¾ˆéš¾æ¦‚æ‹¬å…¶å®Œæ•´çš„çŸ¥è¯†ç‚¹ï¼Œè€Œä¸”ç¬”è€…ä¹Ÿåªæ˜¯çŸ¥å…¶çš®æ¯›è€Œå·²ï¼ˆè¿˜éœ€åŠªåŠ› ğŸ’ªï¼‰ã€‚ã€‚ã€‚ä½†æ˜¯é€šä¿—ä¸€ç‚¹æ¦‚æ‹¬çš„è¯ï¼Œå°±æ˜¯ä¸ºä»€ä¹ˆç”µè„‘å¯ä»¥å°†ä¸€ä¸² js å­—ç¬¦ä¸²æ­£ç¡®çš„è®©æœºå™¨è¯†åˆ«ã€‚ä»è€Œå¾—åˆ°ä½ æƒ³è¦çš„æ•ˆæœã€‚ä¸‹é¢æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„å¤§ä½“è§£ææ­¥éª¤æ˜¯æ€æ ·çš„ã€‚","tags":["javascript"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/2020_04_21_js_ast/","previous":{"fields":{"slug":"/post/2020_03_25_js_event_loop/"},"frontmatter":{"title":"10åˆ†é’Ÿäº†è§£æµè§ˆå™¨çš„Event Loop"}},"next":null}}}