{"componentChunkName":"component---src-templates-post-js","path":"/post/2020_04_27_js_lru_ strategy/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby OMG Blog","post":{"pageviews":true}}},"markdownRemark":{"id":"05a89467-2e7b-570d-8217-d30f5971156c","excerpt":"ä»€ä¹ˆæ˜¯ LRU ç®—æ³• LRU å…¨ç§° Least Resource Usedï¼Œç¿»è¯‘è¿‡æ¥å³æ˜¯ æœ€åè¢«ä½¿ç”¨çš„èµ„æºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€åè¢«ä½¿ç”¨çš„èµ„æºæ˜¯æœ‰ç”¨çš„ï¼Œå¾ˆä¹…æ²¡æœ‰ä½¿ç”¨è¿‡çš„èµ„æºæ˜¯æ— ç”¨çš„ï¼Œå†…å­˜æ»¡äº†ä¹‹å LRU å°±ä¼šä¼˜å…ˆé”€æ¯ å¾ˆä¹…æ²¡æœ‰ä½¿ç”¨çš„èµ„æºã€‚ ğŸŒ° æ‹¿å®‰å“æ‰‹æœºä¸¾ä¾‹ï¼ŒæŠŠè¿è¡Œåå°æƒ³åƒæˆä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œå‡è®¾æ‰‹æœºæœ€å¤šåªèƒ½åœ¨åå°è¿è¡Œâ€¦","html":"<h2 id=\"ä»€ä¹ˆæ˜¯-lru-ç®—æ³•\">ä»€ä¹ˆæ˜¯ LRU ç®—æ³•</h2>\n<p>LRU å…¨ç§° <strong>Least Resource Used</strong>ï¼Œç¿»è¯‘è¿‡æ¥å³æ˜¯ æœ€åè¢«ä½¿ç”¨çš„èµ„æºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€åè¢«ä½¿ç”¨çš„èµ„æºæ˜¯æœ‰ç”¨çš„ï¼Œå¾ˆä¹…æ²¡æœ‰ä½¿ç”¨è¿‡çš„èµ„æºæ˜¯æ— ç”¨çš„ï¼Œå†…å­˜æ»¡äº†ä¹‹å LRU å°±ä¼šä¼˜å…ˆé”€æ¯ å¾ˆä¹…æ²¡æœ‰ä½¿ç”¨çš„èµ„æºã€‚</p>\n<p>ğŸŒ° æ‹¿å®‰å“æ‰‹æœºä¸¾ä¾‹ï¼ŒæŠŠè¿è¡Œåå°æƒ³åƒæˆä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œå‡è®¾æ‰‹æœºæœ€å¤šåªèƒ½åœ¨åå°è¿è¡Œ 3 ä¸ªç¨‹åºï¼Œå½“ä½ æŒ‰é¡ºåºæ‰“å¼€ app1ã€app2ã€app3 æ—¶ï¼Œåœ¨ç©ºé—´ä¸­çš„å­˜å‚¨é¡ºåºæŒ‰ LRU çš„æ’åºæ–¹å¼ä¸º app3ã€app2ã€app1ï¼Œæ­¤æ—¶å†æ¬¡æ‰“å¼€ app1ã€é¡ºåºå˜ä¸º app1ã€app3ã€app2ï¼Œæœ€åå†æ‰“å¼€ app4ï¼Œç”±äºåå°æœ€å¤šåªèƒ½è¿è¡Œ 3 ä¸ªç¨‹åºï¼Œapp2 ä¸ºæœ€ä¹…æœªæ‰“å¼€çš„ç¨‹åºï¼Œæ‰€ä»¥ app2 è¢«ç§»é™¤ï¼Œapp4 è¿›å…¥åå°ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2d95e74acaa0435db3ea428eee4e6373/54b06/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.387096774193544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAARlAAAEZQAGA43XUAAAB+UlEQVQozz1S204TURSdjyDCA73O5dzmds6cM/fpdIZSWmqhFEqbUqFqDLWifQBC1ESMib7ok2/+rYMFk/WyV/ZaO3vvJRHMQd1AGgWEq9gpoGCHEEE0Cuu6jh7JNRARSHf/l1KA/f7gRTvtU+CohigsNMIjzc2T3vD4ZWokOhYKcTTshDjggHuaKCTKWhyT4Ozq7vn+mKtsu66XqroCmaPQxnA2vbkXRggVWlIMAB1btrvz5ZsvvwIjVBB7EDdhUNmomGU9NsLO6KQ3OhFB2oIRq1lwU85Ur5PtN7o9P0h3cBjQRsrzHIXaerJrRcerz+2jmQPF6XJ58ekuORhxmbGolQ2mAvvj6fnb7/fjq/cJiSwauU6aoOBRHJpxb7bI8kMO3S0otlBQsxMm2+3J68WP36HTVGW6CUXFSm0oJrdfR4sbqlL133WlHAT1japTNlMSKpgCzBCkeyQ2a4byrJ4CnxFPJYxglqNAL2OrhFs4ArooIAkz7C9vdw6nVGVK4Uc41F0h09bwfPXzT+7vEY3JBYl5aMTds8vBbOEBd7sCSlUkJUZ8cvFuNzsQgMvkYROt6IOu6+XN3aNIj4pXFzxALDbjV9ffJvNVJ+5NP3wcXV5LFLm4QiyVFcFQnkJiYdcGjiFbNhLaUyRMJFAZozLyvaw9mmeD2V/sYYQ3hDo9AQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"å›¾ä¾‹\"\n        title=\"å›¾ä¾‹\"\n        src=\"/static/2d95e74acaa0435db3ea428eee4e6373/799d3/1.png\"\n        srcset=\"/static/2d95e74acaa0435db3ea428eee4e6373/00d96/1.png 148w,\n/static/2d95e74acaa0435db3ea428eee4e6373/0b23c/1.png 295w,\n/static/2d95e74acaa0435db3ea428eee4e6373/799d3/1.png 590w,\n/static/2d95e74acaa0435db3ea428eee4e6373/54b06/1.png 620w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"lru-ç®—æ³•çš„æè¿°\">LRU ç®—æ³•çš„æè¿°</h2>\n<p>æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œè®¾æƒ³ä¸€ä¸‹å¦‚æœæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç±»æ¥æ¨¡æ‹Ÿ LRU çš„ç¼“å­˜æ–¹å¼ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¸¸é‡ SIZEï¼Œç”¨äºå‘ŠçŸ¥å…¶æœ€å¤§ç¼“å­˜æ•°æ˜¯å¤šå°‘ã€‚å…¶æ¬¡ï¼Œéœ€è¦ä¸€ä¸ª get å’Œ put methodsï¼Œç”¨äºè·å–å…¶ä¿å­˜çš„å†…å®¹å’Œæ’å…¥æ–°çš„å†…å®¹ã€‚</p>\n<h2 id=\"lru-å®ç°\">LRU å®ç°</h2>\n<p>è¿™é‡Œé€‰æ‹©ç”¨ map æ¥å®ç° LRUï¼Œå› ä¸º map çš„é”®å€¼æ’å…¥æ˜¯æœ‰åºçš„,è€Œ object æ’å…¥æ˜¯æ— åºçš„ï¼Œæ— æ³•æ‰¾åˆ°æœ€å…ˆæ’å…¥çš„æ•°æ®</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">LRUCache</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">size</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size <span class=\"token operator\">=</span> size\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> val <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> val <span class=\"token operator\">===</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">undefined</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// é‡æ–°å‘mapæ³¨å…¥</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> val\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// å¦‚æœkeyå­˜åœ¨ï¼Œdel key</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> keys <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// é•¿åº¦è¶…å‡ºæ—¶ æ¸…æ¥šç¬¬ä¸€é¡¹</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span>size <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","headings":[{"value":"ä»€ä¹ˆæ˜¯ LRU ç®—æ³•","depth":2},{"value":"LRU ç®—æ³•çš„æè¿°","depth":2},{"value":"LRU å®ç°","depth":2}],"frontmatter":{"title":"æ‰‹æ‘¸æ‰‹ï¼šç”¨jså®ç°ä¸€ä¸ªLRUç¼“å­˜æ·˜æ±°å™¨","date":"April 27, 2020","description":null,"tags":["javascript"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/2020_04_27_js_lru_ strategy/","previous":{"fields":{"slug":"/post/2020_04_21_js_ast/"},"frontmatter":{"title":"æ–°ç“¶æ—§é…’ï¼šå¦‚ä½•ç”¨jså†™ä¸€ä¸ªjsè§£é‡Šå™¨"}},"next":{"fields":{"slug":"/post/2020_06_15_mzsf_1/"},"frontmatter":{"title":"ã€æ¯å‘¨ç®—æ³•ã€‘ï¼šä¸¤æ•°ä¹‹å’Œ"}}}}}